---
description: Rust best practices and patterns for high-quality code
globs: **/*.rs, Cargo.toml
alwaysApply: false
---

# Rust Best Practices

## Code Style and Structure

- Write idiomatic and safe Rust code
- Embrace ownership, borrowing, and lifetime patterns
- Prefer trait implementations over inheritance
- Use descriptive variable names (snake_case)
- Structure files with public modules and private helpers
- Follow the Rust API Guidelines

## Naming Conventions

- Use snake_case for functions, variables, and modules
- Use PascalCase for types, traits, and enums
- Follow standard Rust module hierarchy patterns
- Use proper const naming conventions (SCREAMING_SNAKE_CASE)

## Type System

- Leverage type system for compile-time guarantees
- Use generics and trait bounds effectively
- Implement custom traits when appropriate
- Use Result and Option for flow control
- Derive common traits (Debug, Clone, Eq) where possible

## Memory and Performance

- Minimize heap allocations where possible
- Use references and borrowing appropriately
- Implement zero-cost abstractions
- Use async/await for I/O-bound operations
- Avoid unnecessary cloning
- Use proper capacity hints for collections

## Error Handling

- Use Result for fallible operations
- Implement custom error types using `thiserror` or `anyhow`
- Provide meaningful context and error messages
- Use the `?` operator appropriately
- Handle all error cases explicitly

## Testing

- Write proper unit tests in same file
- Implement proper integration tests in `tests/`
- Use proper assertion macros
- Test failure cases and edge cases
- Implement proper mocking where necessary

## Implementation Workflow

- Think step-by-step before writing code
- Confirm logic in pseudocode if complex
- Fully implement all requested functionality
- Leave no TODOs or unimplemented traits
- Reference module paths explicitly
- Prioritize both safety and efficiency

## Tooling and Environment

- Use latest stable Rust version
- Follow Cargo conventions
- Use clippy for linting
- Format code using rustfmt
- Manage dependencies effectively
